import{ref as t,withAsyncContext as e,watch as r,mergeProps as s,unref as a,useSSRContext as i}from"vue";import{ssrRenderAttrs as o,ssrInterpolate as n,ssrRenderList as d}from"vue/server-renderer";import{m as l,k as c}from"./server.mjs";import{u as p}from"./asyncData-CWCkQ0Ta.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"lru-cache";import"node:fs";import"node:path";import"@iconify/utils";import"node:crypto";import"consola";import"xss";import"vue-router";import"@supabase/ssr";import"tailwindcss/colors";import"@iconify/vue";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";const m={__name:"registrations",__ssrInlineRender:!0,async setup(i){let m,x;const g=l(),v=c().params.id,u=t(null),h=t([]),{pending:y,error:f,refresh:b}=([m,x]=e(async()=>p(`event-registrations-${v}`,async()=>{try{const{data:t,error:e}=await g.from("events").select("title, form_fields").eq("id",v).single();if(e)throw e;u.value=t;const{data:r,error:s}=await g.from("registrations").select("created_at, form_data").eq("event_id",v).order("created_at",{ascending:!1});if(s)throw s;return h.value=r||[],{event:t,registrations:r}}catch(t){throw t}},{server:!1})),m=await m,x(),m);return r([u,h],([t,e])=>{},{immediate:!0}),(t,e,r,i)=>{e(`<div${o(s({class:"min-h-screen bg-[#f4f5f3] p-6"},i))}><div class="max-w-6xl mx-auto">`),a(y)?e('<div class="text-center py-12"><div class="animate-spin w-8 h-8 border-4 border-[#ACBEA3] border-t-transparent rounded-full mx-auto mb-4"></div><p class="text-gray-600">Loading registrations...</p></div>'):a(f)?e(`<div class="text-center py-12"><div class="text-red-500 text-lg mb-4">âŒ Failed to load registrations</div><p class="text-gray-600 mb-4">${n(a(f).message||"Something went wrong")}</p><button class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"> Try Again </button></div>`):(e(`<div class="bg-white rounded-xl shadow-sm border border-gray-200"><div class="p-6 border-b border-gray-200"><div class="flex justify-between items-center"><div><p class="text-sm text-gray-500 mb-1">Registrations for</p><h1 class="text-2xl font-bold text-gray-900">${n(a(u)?.title||"Event")}</h1><p class="text-sm text-gray-600 mt-1">${n(a(h).length)} ${n(1===a(h).length?"registration":"registrations")}</p></div><button class="flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg><span>Back to Events</span></button></div></div><div class="p-6">`),0===a(h).length?e('<div class="text-center py-12"><div class="text-gray-400 text-6xl mb-4">ğŸ“‹</div><h3 class="text-lg font-medium text-gray-900 mb-2">No registrations yet</h3><p class="text-gray-500">No one has registered for this event yet.</p></div>'):(e('<div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"> Registration Date </th>\x3c!--[--\x3e'),d(a(u)?.form_fields||[],t=>{e(`<th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">${n(t.label)} `),t.required?e('<span class="text-red-500 ml-1">*</span>'):e("\x3c!----\x3e"),e("</th>")}),e('\x3c!--]--\x3e</tr></thead><tbody class="bg-white divide-y divide-gray-200">\x3c!--[--\x3e'),d(a(h),(t,r)=>{var s;e(`<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${n((s=t.created_at,s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"))}</td>\x3c!--[--\x3e`),d(a(u)?.form_fields||[],r=>{e('<td class="px-6 py-4 text-sm text-gray-900"><div class="max-w-xs">'),t.form_data&&t.form_data[r.label]?e(`<span class="break-words">${n(t.form_data[r.label])}</span>`):e('<span class="text-gray-400 italic">-</span>'),e("</div></td>")}),e("\x3c!--]--\x3e</tr>")}),e("\x3c!--]--\x3e</tbody></table></div>")),a(h).length>0?e('<div class="mt-6 flex justify-end"><button class="flex items-center space-x-2 px-4 py-2 bg-[#ACBEA3] text-white rounded-lg hover:bg-[#9BAD94] transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg><span>Export CSV</span></button></div>'):e("\x3c!----\x3e"),e("</div></div>")),e("</div></div>")}}},x=m.setup;m.setup=(t,e)=>{const r=i();return(r.modules||(r.modules=new Set)).add("pages/admin/events/[id]/registrations.vue"),x?x(t,e):void 0};export{m as default};
//# sourceMappingURL=registrations-ClObqkTQ.mjs.map
