import{defineComponent as e,computed as t,h as o,onServerPrefetch as r}from"vue";import{Icon as n,getIcon as s,loadIcon as i}from"@iconify/vue";import{getIconCSS as u}from"@iconify/utils/lib/css/icon";import{g as a,b as l,h as c,u as m}from"./server.mjs";import{u as p}from"./asyncData-CWCkQ0Ta.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"lru-cache";import"node:fs";import"node:path";import"@iconify/utils";import"node:crypto";import"consola";import"xss";import"vue-router";import"@supabase/ssr";import"tailwindcss/colors";import"vue/server-renderer";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";async function loadIcon(e,t){if(!e)return null;const o=s(e);if(o)return o;let r;const n=i(e).catch(()=>null);return t>0?await Promise.race([n,new Promise(e=>{r=setTimeout(()=>{e()},t)})]).finally(()=>clearTimeout(r)):await n,s(e)}function useResolvedName(e){const o=l().icon,r=(o.collections||[]).sort((e,t)=>t.length-e.length);return t(()=>{const t=e(),n=t.startsWith(o.cssSelectorPrefix)?t.slice(o.cssSelectorPrefix.length):t,s=o.aliases?.[n]||n;if(!s.includes(":")){const e=r.find(e=>s.startsWith(e+"-"));return e?e+":"+s.slice(e.length+1):s}return s})}function resolveCustomizeFn(e,t){if(!1!==e)return!0===e||null===e?t:e}const d="NUXT_ICONS_SERVER_CSS";const f=e({name:"NuxtIconCss",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(e){const n=a(),s=l().icon,i=t(()=>e.name?s.cssSelectorPrefix+e.name:""),p=t(()=>"."+function(e){return e.replace(/([^\w-])/g,"\\$1")}(i.value));return r(async()=>{{const t=c().icon||{};if(!t?.serverKnownCssClasses?.includes(i.value)){const t=await loadIcon(e.name,s.fetchTimeout).catch(()=>null);if(!t)return null;let o=n.vueApp._context.provides[d];if(o||(o=n.vueApp._context.provides[d]=new Map,n.runWithContext(()=>{m({style:[()=>{let e=Array.from(o.values()).sort().join("");return s.cssLayer&&(e=`@layer ${s.cssLayer} {${e}}`),{innerHTML:e}}]},{tagPriority:"low"})})),e.name&&!o.has(e.name)){const r=function(t,o=!0){let r=p.value;s.cssWherePseudo&&(r=`:where(${r})`);const n=u(t,{iconSelector:r,format:"compressed",customise:resolveCustomizeFn(e.customize,s.customize)});return s.cssLayer&&o?`@layer ${s.cssLayer} { ${n} }`:n}(t,!1);o.set(e.name,r)}return null}}}),()=>o("span",{class:["iconify",i.value]})}}),v=e({name:"NuxtIconSvg",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(e,{slots:t}){a();const s=l().icon,i=useResolvedName(()=>e.name),u="i-"+i.value;return i.value&&r(async()=>{await p(u,async()=>await loadIcon(i.value,s.fetchTimeout),{deep:!1})}),()=>o(n,{icon:i.value,ssr:!0,customise:resolveCustomizeFn(e.customize,s.customize)},t)}}),y=e({name:"NuxtIcon",props:{name:{type:String,required:!0},mode:{type:String,required:!1,default:null},size:{type:[Number,String],required:!1,default:null},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(e,{slots:r}){const n=a(),s=l().icon,i=useResolvedName(()=>e.name),u=t(()=>n.vueApp?.component(i.value)||("svg"===(e.mode||s.mode)?v:f)),c=t(()=>{const t=e.size||s.size;return t?{fontSize:Number.isNaN(+t)?t:t+"px"}:null});return()=>o(u.value,{...s.attrs,name:i.value,class:s.class,style:c.value,customize:e.customize},r)}});export{y as default};
//# sourceMappingURL=index-DLlP2E53.mjs.map
