import{ref as e,withAsyncContext as r,watch as t,mergeProps as s,unref as o,useSSRContext as a}from"vue";import{ssrRenderAttrs as i,ssrInterpolate as n,ssrRenderAttr as l,ssrIncludeBooleanAttr as d,ssrLooseContain as c,ssrLooseEqual as u,ssrRenderList as p}from"vue/server-renderer";import{m,e as b,k as y}from"./server.mjs";import{u as v}from"./useToast-DoyrxJlK.mjs";import{u as f}from"./asyncData-CWCkQ0Ta.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"lru-cache";import"node:fs";import"node:path";import"@iconify/utils";import"node:crypto";import"consola";import"xss";import"vue-router";import"@supabase/ssr";import"tailwindcss/colors";import"@iconify/vue";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";const x={__name:"edit",__ssrInlineRender:!0,async setup(a){let x,g;const A=m();b();const h=y();v();const w=h.params.id,_=e(!1),$=e({title:"",event_date:"",venue:"",description:"",form_fields:[],admission_fee:0,currency:"₦",is_free:!0}),{data:E,pending:k,error:C,refresh:B}=([x,g]=r(async()=>f(`event-${w}`,async()=>{const{data:e,error:r}=await A.from("events").select("*").eq("id",w).single();if(r)throw r;return e},{server:!1})),x=await x,g(),x);function formatDateForInput(e){if(!e)return"";return new Date(e).toISOString().slice(0,16)}return t(E,e=>{e&&($.value={title:e.title||"",event_date:e.event_date?formatDateForInput(e.event_date):"",venue:e.venue||"",description:e.description||"",form_fields:Array.isArray(e.form_fields)?e.form_fields:[],admission_fee:e.admission_fee||0,currency:e.currency||"₦",is_free:void 0===e.is_free||e.is_free})},{immediate:!0}),(e,r,t,a)=>{r(`<div${i(s({class:"min-h-screen bg-[#f4f5f3] p-6"},a))}><div class="max-w-2xl mx-auto"><div class="mb-6"><div class="flex items-center space-x-3 mb-4"><button class="p-2 hover:bg-white hover:shadow-sm rounded-lg transition-all"><svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg></button><div><h1 class="text-2xl font-bold text-gray-900">Edit Event</h1><p class="text-gray-600">Update your event details</p></div></div></div><div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">`),o(k)?r('<div class="text-center py-12"><div class="animate-spin w-8 h-8 border-4 border-[#ACBEA3] border-t-transparent rounded-full mx-auto mb-4"></div><p class="text-gray-600">Loading event details...</p></div>'):o(C)?r(`<div class="text-center py-12"><div class="text-red-500 text-lg mb-4">❌ Failed to load event</div><p class="text-gray-600 mb-4">${n(o(C).message||"Something went wrong")}</p><button class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700"> Try Again </button></div>`):(r(`<div><form><div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-2"> Event Title </label><input${l("value",o($).title)} type="text" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ACBEA3] focus:border-transparent" placeholder="Enter event title"></div><div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-2"> Event Date </label><input${l("value",o($).event_date)} type="datetime-local" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ACBEA3] focus:border-transparent"></div><div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-2"> Venue </label><input${l("value",o($).venue)} type="text" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ACBEA3] focus:border-transparent" placeholder="Enter event venue"></div><div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-3"> Admission Fee </label><div class="mb-4"><label class="flex items-center space-x-3 cursor-pointer"><input${d(Array.isArray(o($).is_free)?c(o($).is_free,null):o($).is_free)?" checked":""} type="checkbox" class="w-4 h-4 text-[#ACBEA3] border-gray-300 rounded focus:ring-[#ACBEA3] focus:ring-2"><span class="text-sm text-gray-700">This is a free event</span></label></div>`),o($).is_free?r("\x3c!----\x3e"):r(`<div class="grid grid-cols-3 gap-3"><div class="col-span-2"><label class="block text-xs font-medium text-gray-600 mb-1"> Amount </label><input${l("value",o($).admission_fee)} type="number" step="0.01" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ACBEA3] focus:border-transparent" placeholder="0.00"></div><div><label class="block text-xs font-medium text-gray-600 mb-1"> Currency </label><select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ACBEA3] focus:border-transparent"><option value="₦"${d(Array.isArray(o($).currency)?c(o($).currency,"₦"):u(o($).currency,"₦"))?" selected":""}>₦ (Naira)</option><option value="$"${d(Array.isArray(o($).currency)?c(o($).currency,"$"):u(o($).currency,"$"))?" selected":""}>$ (USD)</option><option value="£"${d(Array.isArray(o($).currency)?c(o($).currency,"£"):u(o($).currency,"£"))?" selected":""}>£ (GBP)</option><option value="€"${d(Array.isArray(o($).currency)?c(o($).currency,"€"):u(o($).currency,"€"))?" selected":""}>€ (EUR)</option></select></div></div>`),r('<div class="mt-3 p-3 bg-gray-50 rounded-lg"><div class="text-sm text-gray-600"><span class="font-medium">Admission Fee:</span>'),o($).is_free?r('<span class="text-green-600 font-medium ml-2">Free</span>'):r(`<span class="font-medium ml-2">${n(o($).currency)}${n(parseFloat(o($).admission_fee||0).toFixed(2))}</span>`),r(`</div></div></div><div class="mb-6"><label class="block text-sm font-medium text-gray-700 mb-2"> Description </label><textarea rows="4" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ACBEA3] focus:border-transparent" placeholder="Enter event description">${n(o($).description)}</textarea></div><div class="mb-6"><div class="flex items-center justify-between mb-4"><label class="block text-sm font-medium text-gray-700"> Registration Form Fields </label><button type="button" class="text-[#ACBEA3] hover:text-[#9BAD94] font-medium text-sm"> + Add Field </button></div><div class="space-y-3">\x3c!--[--\x3e`),p(o($).form_fields,(e,t)=>{r(`<div class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg bg-gray-50"><input${l("value",e.label)} type="text" placeholder="Field Label (e.g., Full Name)" class="flex-1 px-3 py-2 border border-gray-300 rounded focus:ring-1 focus:ring-[#ACBEA3] focus:border-transparent text-sm"><select class="px-3 py-2 border border-gray-300 rounded focus:ring-1 focus:ring-[#ACBEA3] focus:border-transparent text-sm"><option value="text"${d(Array.isArray(e.type)?c(e.type,"text"):u(e.type,"text"))?" selected":""}>Text</option><option value="email"${d(Array.isArray(e.type)?c(e.type,"email"):u(e.type,"email"))?" selected":""}>Email</option><option value="tel"${d(Array.isArray(e.type)?c(e.type,"tel"):u(e.type,"tel"))?" selected":""}>Phone</option><option value="number"${d(Array.isArray(e.type)?c(e.type,"number"):u(e.type,"number"))?" selected":""}>Number</option><option value="textarea"${d(Array.isArray(e.type)?c(e.type,"textarea"):u(e.type,"textarea"))?" selected":""}>Textarea</option></select><label class="flex items-center text-sm"><input${d(Array.isArray(e.required)?c(e.required,null):e.required)?" checked":""} type="checkbox" class="mr-2 text-[#ACBEA3] focus:ring-[#ACBEA3]"> Required </label><button type="button" class="text-red-500 hover:text-red-700 p-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div>`)}),r("\x3c!--]--\x3e"),0===o($).form_fields.length?r('<div class="text-center py-8 text-gray-500"> No registration fields added yet. Click &quot;Add Field&quot; to create registration form fields. </div>'):r("\x3c!----\x3e"),r(`</div></div><div class="flex space-x-4"><button type="button" class="flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"> Cancel </button><button type="submit"${d(o(_))?" disabled":""} class="flex-1 bg-[#ACBEA3] text-white px-4 py-3 rounded-lg hover:bg-[#9BAD94] disabled:opacity-50 disabled:cursor-not-allowed transition-colors">`),o(_)?r('<span class="flex items-center justify-center"><div class="animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"></div> Updating... </span>'):r("<span>Update Event</span>"),r("</button></div></form></div>")),r("</div></div></div>")}}},g=x.setup;x.setup=(e,r)=>{const t=a();return(t.modules||(t.modules=new Set)).add("pages/admin/events/[id]/edit.vue"),g?g(e,r):void 0};export{x as default};
//# sourceMappingURL=edit-C1vcuDn0.mjs.map
